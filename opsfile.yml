version: 3

tasks:

  cli:
    silent: true
    desc: python repl
    cmds:
    - |
      cd $OPS_PWD
      set -a
      source .env
      if {{.__ide}}
      then ~/.ops/miniconda3/bin/ptipython
      else python -m IPython
      fi

  chat:
    desc: ask to the AI (LLama3)
    silent: true
    cmds:
    - |
      set -a
      source $OPS_PWD/.env
      args={{._args_}}
      set -- ${args[@]}
      test "$1" = "--" && shift
      python chat.py {{._action_}} "$@"

  milvus:
    desc: milvus
    cmds:
    - |
      set -a
      source $OPS_PWD/.env
      {{.add}} && python milvus.py add {{._user_}} {{._password_}}
      {{.delete}} && python milvus.py delete {{._user_}} 
      {{.list}} && python milvus.py list
      true